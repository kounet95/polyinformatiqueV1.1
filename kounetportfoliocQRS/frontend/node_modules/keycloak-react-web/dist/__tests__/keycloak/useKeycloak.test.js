"use strict";
exports.__esModule = true;
var tslib_1 = require("tslib");
var react_1 = tslib_1.__importDefault(require("react"));
var react_2 = require("@testing-library/react");
var useKeycloak_1 = require("../../keycloak/useKeycloak");
var KeycloakProvider_1 = tslib_1.__importDefault(require("../../keycloak/KeycloakProvider"));
// import getAuthInstance from "../../authInstance";
var keycloak_js_1 = tslib_1.__importDefault(require("keycloak-js"));
describe("useKeycloak hook tests", function () {
    test("should throw keycloak client not set error", function () {
        try {
            (0, useKeycloak_1.useKeycloak)();
        }
        catch (err) {
            console.log(err);
            // expect(err).not.toBeFalsy();
        }
    });
    test("should return keycloak instance and initialized flag", function () { return tslib_1.__awaiter(void 0, void 0, void 0, function () {
        var ins, init, TestComp;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    ins = null;
                    TestComp = function () {
                        var _a = (0, useKeycloak_1.useKeycloak)(), keycloak = _a.keycloak, initialized = _a.initialized;
                        ins = keycloak;
                        init = initialized;
                        return null;
                    };
                    // eslint-disable-next-line testing-library/no-unnecessary-act
                    return [4 /*yield*/, (0, react_2.act)(function () { return tslib_1.__awaiter(void 0, void 0, void 0, function () {
                            return tslib_1.__generator(this, function (_a) {
                                (0, react_2.render)(react_1["default"].createElement(KeycloakProvider_1["default"], { client: new keycloak_js_1["default"]() },
                                    react_1["default"].createElement(TestComp, null)));
                                return [2 /*return*/];
                            });
                        }); })];
                case 1:
                    // eslint-disable-next-line testing-library/no-unnecessary-act
                    _a.sent();
                    expect(ins).toBeInstanceOf(keycloak_js_1["default"]);
                    expect(typeof init).toBe("boolean");
                    return [2 /*return*/];
            }
        });
    }); });
});
